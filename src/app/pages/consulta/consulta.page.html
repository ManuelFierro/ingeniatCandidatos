<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/"></ion-back-button>
    </ion-buttons>
    <ion-title>Lista de vehiculos</ion-title>
  </ion-toolbar>
</ion-header>
<p-toast key="tst" position="top-center" [preventOpenDuplicates]="true"></p-toast>

<ion-content>
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content pullingIcon="chevron-down-circle-outline" pullingText="Actualizar"
      refreshingSpinner="circles" refreshingText="Actualizando lista de vehiculos">
    </ion-refresher-content>
  </ion-refresher>
  <ion-card>
    <div class="card">
      <p-table #dtc responsiveLayout="scroll" [value]="listaVehiculos" [globalFilterFields]="['nombreModelo','nombreMarca']" [filterDelay]="0"
        [paginator]="true" [rows]="10" selectionMode="single" dataKey="id" styleClass="p-datatable-sm">
        <ng-template pTemplate="caption">
          <div class="table-header">
            <p-multiSelect [options]="listaMarcas" [(ngModel)]="selectedMarca" optionLabel="nombre"
              (onChange)="filtrarMarca()">
            </p-multiSelect>
            <span class="p-input-icon-left">
              <i class="pi pi-search"></i>
              <input class="p-inputtext p-component p-filled" type="text"
                (input)="dtc.filterGlobal($any($event.target).value, 'contains')" style="width:100%;"
                placeholder="Buscar ... " />
            </span>
          </div>
        </ng-template>
        <ng-template pTemplate="header">
          <tr>
            <th pSortableColumn="nombreModelo">
              <div class="flex justify-content-between align-items-center">
                Modelo
                <p-sortIcon field="nombreModelo"></p-sortIcon>
              </div>
            </th>
            <th pSortableColumn="nombreMarca">
              <div class="flex justify-content-between align-items-center">
                Marca
                <p-sortIcon field="nombreMarca"></p-sortIcon>
              </div>
            </th>

          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-vehi>
          <tr>
            <td>
              <span class="p-column-title">Modelo</span>
              <span class="image-text">{{vehi.nombreModelo}}</span>
            </td>
            <td>
              <span class="p-column-title">Marca</span>
              <span class="image-text">{{vehi.nombreMarca}}</span>
            </td>
          </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
          <tr>
            <td colspan="8">No hay vehiculos</td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </ion-card>
</ion-content>